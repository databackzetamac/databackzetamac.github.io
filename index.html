<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DataBack Zetamac</title>
    <meta name="description" content="Modern arithmetic speed drill with analytics." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="modern.css" />
  </head>
  <body>
    <div class="app-shell">
      <nav class="topbar glass" aria-label="Primary">
        <div class="brand">DataBack <span class="accent">Zetamac</span></div>
        <div class="nav-actions">
          <button id="themeToggle" class="ghost" aria-label="Toggle theme">ðŸŒ—</button>
          <a href="https://github.com/databackzetamac/databackzetamac.github.io" class="ghost" target="_blank" rel="noopener" aria-label="GitHub Repo">GitHub</a>
        </div>
      </nav>
      <div class="tabbar glass" role="tablist" aria-label="Main views">
        <button class="tab active" role="tab" aria-selected="true" id="tabHome" data-target="homeView">Home</button>
        <button class="tab locked" role="tab" aria-selected="false" id="tabTest" data-target="sessionView" disabled>Test</button>
        <button class="tab" role="tab" aria-selected="false" id="tabStats" data-target="statsView">Stats</button>
      </div>
      <main id="app" class="content-area">
        <section id="settingsView" class="panel glass active" aria-label="Test Settings" data-view="homeView">
          <header class="panel-header">
            <h1>Configure Session</h1>
            <p class="subtitle">Speed drill â€¢ 2 minute default â€¢ instant feedback</p>
          </header>
          <form id="settingsForm" class="settings-grid">
            <div class="card-group">
              <h2 class="group-title">Operations</h2>
              <div class="chips" id="opChips">
                <label class="chip"><input type="checkbox" name="ops" value="add" checked><span>+</span></label>
                <label class="chip"><input type="checkbox" name="ops" value="sub" checked><span>âˆ’</span></label>
                <label class="chip"><input type="checkbox" name="ops" value="mul" checked><span>Ã—</span></label>
                <label class="chip"><input type="checkbox" name="ops" value="div" checked><span>Ã·</span></label>
              </div>
            </div>
            <div class="card-group ranges">
              <h2 class="group-title">Ranges</h2>
              <div class="range-cluster">
                <h3>Add / Sub</h3>
                <div class="inputs">
                  <label>A Min<input type="number" id="add_aMin" value="2"/></label>
                  <label>A Max<input type="number" id="add_aMax" value="100"/></label>
                  <label>B Min<input type="number" id="add_bMin" value="2"/></label>
                  <label>B Max<input type="number" id="add_bMax" value="100"/></label>
                </div>
              </div>
              <div class="range-cluster">
                <h3>Multiply</h3>
                <div class="inputs">
                  <label>L Min<input type="number" id="mul_aMin" value="2"/></label>
                  <label>L Max<input type="number" id="mul_aMax" value="12"/></label>
                  <label>R Min<input type="number" id="mul_bMin" value="2"/></label>
                  <label>R Max<input type="number" id="mul_bMax" value="100"/></label>
                </div>
              </div>
              <div class="range-cluster">
                <h3>Division</h3>
                <div class="inputs">
                  <label>Div Min<input type="number" id="div_divisorMin" value="2"/></label>
                  <label>Div Max<input type="number" id="div_divisorMax" value="12"/></label>
                  <label>Q Min<input type="number" id="div_quotientMin" value="2"/></label>
                  <label>Q Max<input type="number" id="div_quotientMax" value="100"/></label>
                </div>
              </div>
            </div>
            <div class="card-group">
              <h2 class="group-title">Duration</h2>
              <label class="select-wrap" id="durationLabel">Duration
                <select id="duration">
                  <option value="30">30 s</option>
                  <option value="60">1 min</option>
                  <option value="120" selected>2 min</option>
                  <option value="300">5 min</option>
                </select>
              </label>
            </div>
            <div class="actions-row">
              <button type="button" id="startBtn" class="primary lg">Start Session â†’</button>
            </div>
          </form>
        </section>
  <section id="sessionView" class="panel glass" aria-label="Active Session" data-view="sessionView">
          <div class="session-hud">
            <div class="metric"><span class="label">Time</span><span id="timeRemaining" class="value">--</span></div>
            <div class="metric"><span class="label">Score</span><span id="score" class="value">0</span></div>
            <div class="metric"><span class="label">Streak</span><span id="streak" class="value">0</span></div>
            <div class="metric"><span class="label">Acc</span><span id="accuracyLive" class="value">--</span></div>
          </div>
          <div class="problem-wrap" role="group" aria-label="Current Problem">
            <div class="expr">
              <span id="leftOperand" class="operand">0</span>
              <span id="operator" class="operator">+</span>
              <span id="rightOperand" class="operand">0</span>
              <span class="operator eq">=</span>
            </div>
            <input id="answerInput" class="answer" type="text" inputmode="numeric" autocomplete="off" aria-label="Answer" />
            <div id="feedback" class="feedback" aria-live="polite"></div>
          </div>
          <div class="session-controls">
            <button id="quitBtn" class="ghost">End Early</button>
          </div>
        </section>
        <section id="resultsView" class="panel glass" aria-label="Results" data-view="resultsView">
          <header class="panel-header">
            <h1>Session Summary</h1>
          </header>
          <div id="summary" class="summary-grid"></div>
          <div class="actions-row">
            <button id="restartBtn" class="primary">New Session</button>
            <button id="backHome" class="ghost">Back to Settings</button>
          </div>
        </section>
        <section id="statsView" class="panel glass" aria-label="Statistics" data-view="statsView">
          <header class="panel-header">
            <h1>Performance & Analytics</h1>
            <p class="subtitle">Progression â€¢ Distribution â€¢ Activity</p>
          </header>
          <div class="stats-metrics" id="aggregateMetrics">
            <!-- populated dynamically -->
          </div>
          <div class="charts-grid">
            <div class="chart-card">
              <h3>Score Progression <small>(normalized to 120s)</small></h3>
              <canvas id="progressChart" width="800" height="200" aria-label="Score progression line chart"></canvas>
            </div>
            <div class="chart-card">
              <h3>Score Distribution <small>(bins of 10)</small></h3>
              <canvas id="distributionChart" width="800" height="200" aria-label="Score distribution histogram"></canvas>
            </div>
            <div class="chart-card">
              <h3>Tests Per Day</h3>
              <canvas id="testsPerDayChart" width="800" height="180" aria-label="Tests per day bar chart"></canvas>
            </div>
            <div class="chart-card">
              <h3>Time Spent Per Day (minutes)</h3>
              <canvas id="timePerDayChart" width="800" height="180" aria-label="Time spent per day bar chart"></canvas>
            </div>
          </div>
          <div class="recent-wrapper">
            <h3>Recent Sessions</h3>
            <div id="statsList" class="history-list">No sessions yet.</div>
          </div>
        </section>
      </main>
      <footer class="site-footer">
        <span>Local data only â€¢ Future analytics & charts coming</span>
      </footer>
    </div>
  <script src="app.js"></script>
  </body>
</html>
